import ky from "ky-universal";
import { useQuery } from "react-query";

export type Episode = {
  categoriesTags: string[];
  title: string;
  publishedDate: string;
  spotifyURL: string;
  id: string;
};

export async function fetchEpisodes(): Promise<Episode[]> {
  return await ky.get(`${process.env.NEXT_PUBLIC_CMS_URL}/episodes`).json();
}

export function useEpisodes() {
  return useQuery(["episodes"], () => fetchEpisodes());
}
